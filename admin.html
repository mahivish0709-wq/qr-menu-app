<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>管理画面</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        body { font-family: sans-serif; text-align: center; padding-top: 50px; }
        input, button { font-size: 18px; padding: 10px; margin: 10px; border-radius: 5px; border: 1px solid #ccc; }
        button { background-color: #ff9800; color: white; cursor: pointer; border: none; }
    </style>
</head>
<body>
    <h2>メニュー登録</h2>
    <input id="n" type="text" placeholder="料理名" value="牛丼">
    <input id="p" type="number" placeholder="価格" value="800">
    <button id="b">登録を実行する</button>
    <p id="s"></p>

    <script>
        // あなたから教えていただいた最新のKEYを正確に反映しました
        const URL = "https://ooyvztatkhadbquwimhz.supabase.co";
        const KEY = "sb_publishable_X43uA6B8_axn9ZJ2nLHvSw_lfvlWQ"; 

        window.onload = function() {
            const supabase = supabasejs.createClient(URL, KEY);
            
            document.getElementById('b').onclick = async function() {
                const name = document.getElementById('n').value;
                const price = document.getElementById('p').value;
                const status = document.getElementById('s');

                status.innerText = "⏳ 通信中...";

                try {
                    const { error } = await supabase
                        .from('menus')
                        .insert([{ name_ja: name, price: parseInt(price) }]);

                    if (error) {
                        alert("エラー: " + error.message);
                        status.innerText = "失敗しました";
                    } else {
                        alert("✅ 成功！牛丼が登録されました！");
                        status.innerText = "登録完了！";
                    }
                } catch (e) {
                    alert("接続失敗: " + e.message);
                }
            };
        };
    </script>
</body>
</html>
