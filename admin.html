<!DOCTYPE html>
<html lang="ja">
<head><meta charset="UTF-8"><title>診断用管理画面</title><script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script></head>
<body style="text-align:center; padding-top:50px;">
    <h2>診断モード：登録テスト</h2>
    <button id="b" style="padding:20px;" onclick="add()">登録ボタンを押す</button>
    <div id="msg" style="margin-top:20px; color:red; font-weight:bold;">ここに診断結果が出ます</div>

    <script>
        const URL = 'https://ooyvztatkhadbquwimhz.supabase.co';
        const KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9veXZ6dGF0a2hhZGJxdXdpbWh6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg3MjAxNTQsImV4cCI6MjA4NDI5NjE1NH0.8j_E3GTtXfe0ufDVksZhjHYfWVQIGw6nino80USV8no';
        
        async function add() {
            const msg = document.getElementById('msg');
            msg.innerText = "通信中...";
            try {
                const supabase = supabasejs.createClient(URL, KEY);
                const { error } = await supabase.from('menus').insert([{ name_ja: 'テスト牛丼', price: 900 }]);
                
                if (error) {
                    msg.innerText = "❌ 失敗！理由: " + error.message;
                } else {
                    msg.style.color = "green";
                    msg.innerText = "✅ 成功しました！";
                }
            } catch (e) {
                msg.innerText = "❌ プログラムエラー: " + e.message;
            }
        }
    </script>
</body>
</html>
