<!DOCTYPE html>
<html lang="ja">
<head><meta charset="UTF-8"><title>AIç®¡ç†ç”»é¢</title><script src="https://unpkg.com/@supabase/supabase-js@2"></script></head>
<body style="text-align:center; padding-top:50px; font-family:sans-serif;">
    <h2>AIãƒ¡ãƒ‹ãƒ¥ãƒ¼ç™»éŒ²</h2>
    <input id="n" type="text" placeholder="æ–™ç†åï¼ˆæ—¥æœ¬èªï¼‰" style="padding:10px;">
    <input id="p" type="number" placeholder="ä¾¡æ ¼" style="padding:10px; width:80px;">
    <button id="b" onclick="addWithAI()" style="padding:10px 20px; cursor:pointer;">AIç¿»è¨³ã—ã¦ç™»éŒ²</button>
    <div id="msg" style="margin-top:20px;"></div>

    <script>
        async function addWithAI() {
            const msg = document.getElementById('msg');
            msg.innerText = "AIç¿»è¨³ä¸­...";
            const URL = 'https://ooyvztatkhadbquwimhz.supabase.co';
            const KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9veXZ6dGF0a2hhZGJxdXdpbWh6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg3MjAxNTQsImV4cCI6MjA4NDI5NjE1NH0.8j_E3GTtXfe0ufDVksZhjHYfWVQIGw6nino80USV8no';
            const client = supabase.createClient(URL, KEY);

            const name = document.getElementById('n').value;
            const price = document.getElementById('p').value;

            // ç¿»è¨³é–¢æ•°
            const tr = async (t, l) => {
                const res = await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=ja&tl=${l}&dt=t&q=${encodeURI(t)}`);
                const j = await res.json(); return j[0][0][0];
            };

            try {
                const [en, ko, zh] = await Promise.all([tr(name,'en'), tr(name,'ko'), tr(name,'zh-CN')]);
                const { error } = await client.from('menus').insert([{ 
                    name_ja: name, name_en: en, name_ko: ko, name_zh: zh, price: parseInt(price) 
                }]);
                msg.innerText = error ? "âŒã‚¨ãƒ©ãƒ¼" : `âœ…æˆåŠŸï¼\nğŸ‡ºğŸ‡¸${en}\nğŸ‡°ğŸ‡·${ko}\nğŸ‡¨ğŸ‡³${zh}`;
            } catch (e) { msg.innerText = "âŒã‚¨ãƒ©ãƒ¼: " + e.message; }
        }
    </script>
</body>
</html>
