<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>管理画面</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body style="text-align:center; padding-top:50px; font-family:sans-serif;">

    <h2>メニュー登録</h2>
    <div style="margin-bottom:20px;">
        <input id="n" type="text" value="牛丼" style="font-size:18px; padding:10px;">
        <input id="p" type="number" value="800" style="font-size:18px; padding:10px; width:80px;">
    </div>

    <button id="b" style="font-size:25px; padding:20px 40px; background:green; color:white; border-radius:10px; cursor:pointer;"
        onclick="
            const URL = 'https://ooyvztatkhadbquwimhz.supabase.co';
            const KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9veXZ6dGF0a2hhZGJxdXdpbWh6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg3MjAxNTQsImV4cCI6MjA4NDI5NjE1NH0.8j_E3GTtXfe0ufDVksZhjHYfWVQIGw6nino80USV8no';
            
            // ボタンの表示を変えて反応を確認
            this.innerText = '送信中...';
            this.style.background = 'gray';

            try {
                const supabase = supabasejs.createClient(URL, KEY);
                const name = document.getElementById('n').value;
                const price = document.getElementById('p').value;

                supabase.from('menus').insert([{ name_ja: name, price: parseInt(price) }])
                .then(result => {
                    if (result.error) {
                        alert('エラー発生: ' + result.error.message);
                        this.innerText = '失敗（やり直す）';
                        this.style.background = 'red';
                    } else {
                        alert('✅ 成功！！\nデータベースに牛丼が登録されました！');
                        this.innerText = '登録完了！';
                        this.style.background = 'blue';
                    }
                });
            } catch (e) {
                alert('プログラムエラー: ' + e.message);
            }
        ">
        登録を実行する
    </button>

    <p style="margin-top:30px; color:gray;">※ボタンを押して「送信中...」に変われば成功目前です</p>

</body>
</html>
